"use strict";function cov_1d1n6oqfp9(){var path="/home/daniel/sytw/backend/sytw_backend/src/routers/usuarioRouters/patchUsuario.ts";var hash="e277bb97e9e68b79ea3644b7edb2ae8b43033361";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/home/daniel/sytw/backend/sytw_backend/src/routers/usuarioRouters/patchUsuario.ts",statementMap:{"0":{start:{line:2,column:22},end:{line:12,column:3}},"1":{start:{line:3,column:4},end:{line:3,column:33}},"2":{start:{line:3,column:26},end:{line:3,column:33}},"3":{start:{line:4,column:15},end:{line:4,column:52}},"4":{start:{line:5,column:4},end:{line:7,column:5}},"5":{start:{line:6,column:6},end:{line:6,column:68}},"6":{start:{line:6,column:51},end:{line:6,column:63}},"7":{start:{line:8,column:4},end:{line:8,column:39}},"8":{start:{line:10,column:4},end:{line:10,column:33}},"9":{start:{line:10,column:26},end:{line:10,column:33}},"10":{start:{line:11,column:4},end:{line:11,column:17}},"11":{start:{line:13,column:25},end:{line:17,column:2}},"12":{start:{line:14,column:4},end:{line:14,column:72}},"13":{start:{line:16,column:4},end:{line:16,column:21}},"14":{start:{line:18,column:19},end:{line:24,column:1}},"15":{start:{line:19,column:4},end:{line:19,column:42}},"16":{start:{line:19,column:31},end:{line:19,column:42}},"17":{start:{line:20,column:17},end:{line:20,column:19}},"18":{start:{line:21,column:4},end:{line:21,column:141}},"19":{start:{line:21,column:21},end:{line:21,column:141}},"20":{start:{line:21,column:40},end:{line:21,column:141}},"21":{start:{line:21,column:109},end:{line:21,column:141}},"22":{start:{line:22,column:4},end:{line:22,column:36}},"23":{start:{line:23,column:4},end:{line:23,column:18}},"24":{start:{line:25,column:0},end:{line:25,column:62}},"25":{start:{line:26,column:0},end:{line:26,column:36}},"26":{start:{line:27,column:16},end:{line:27,column:48}},"27":{start:{line:28,column:18},end:{line:28,column:49}},"28":{start:{line:29,column:0},end:{line:29,column:46}},"29":{start:{line:36,column:0},end:{line:64,column:3}},"30":{start:{line:37,column:4},end:{line:41,column:5}},"31":{start:{line:38,column:8},end:{line:40,column:11}},"32":{start:{line:42,column:27},end:{line:42,column:37}},"33":{start:{line:43,column:26},end:{line:43,column:47}},"34":{start:{line:44,column:26},end:{line:44,column:90}},"35":{start:{line:44,column:58},end:{line:44,column:89}},"36":{start:{line:45,column:4},end:{line:49,column:5}},"37":{start:{line:46,column:8},end:{line:48,column:11}},"38":{start:{line:50,column:4},end:{line:63,column:5}},"39":{start:{line:51,column:24},end:{line:54,column:10}},"40":{start:{line:55,column:8},end:{line:58,column:9}},"41":{start:{line:56,column:12},end:{line:57,column:15}},"42":{start:{line:59,column:8},end:{line:59,column:33}},"43":{start:{line:62,column:8},end:{line:62,column:43}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:74},end:{line:2,column:75}},loc:{start:{line:2,column:96},end:{line:9,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:6,column:38},end:{line:6,column:39}},loc:{start:{line:6,column:49},end:{line:6,column:65}},line:6},"2":{name:"(anonymous_2)",decl:{start:{line:9,column:6},end:{line:9,column:7}},loc:{start:{line:9,column:28},end:{line:12,column:1}},line:9},"3":{name:"(anonymous_3)",decl:{start:{line:13,column:80},end:{line:13,column:81}},loc:{start:{line:13,column:95},end:{line:15,column:1}},line:13},"4":{name:"(anonymous_4)",decl:{start:{line:15,column:5},end:{line:15,column:6}},loc:{start:{line:15,column:20},end:{line:17,column:1}},line:15},"5":{name:"(anonymous_5)",decl:{start:{line:18,column:50},end:{line:18,column:51}},loc:{start:{line:18,column:65},end:{line:24,column:1}},line:18},"6":{name:"(anonymous_6)",decl:{start:{line:36,column:45},end:{line:36,column:46}},loc:{start:{line:36,column:65},end:{line:64,column:1}},line:36},"7":{name:"(anonymous_7)",decl:{start:{line:44,column:46},end:{line:44,column:47}},loc:{start:{line:44,column:58},end:{line:44,column:89}},line:44}},branchMap:{"0":{loc:{start:{line:2,column:22},end:{line:12,column:3}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:57},end:{line:12,column:2}}],line:2},"1":{loc:{start:{line:2,column:57},end:{line:12,column:2}},type:"cond-expr",locations:[{start:{line:2,column:74},end:{line:9,column:1}},{start:{line:9,column:6},end:{line:12,column:1}}],line:2},"2":{loc:{start:{line:3,column:4},end:{line:3,column:33}},type:"if",locations:[{start:{line:3,column:4},end:{line:3,column:33}},{start:{line:3,column:4},end:{line:3,column:33}}],line:3},"3":{loc:{start:{line:5,column:4},end:{line:7,column:5}},type:"if",locations:[{start:{line:5,column:4},end:{line:7,column:5}},{start:{line:5,column:4},end:{line:7,column:5}}],line:5},"4":{loc:{start:{line:5,column:8},end:{line:5,column:85}},type:"binary-expr",locations:[{start:{line:5,column:8},end:{line:5,column:13}},{start:{line:5,column:18},end:{line:5,column:84}}],line:5},"5":{loc:{start:{line:5,column:18},end:{line:5,column:84}},type:"cond-expr",locations:[{start:{line:5,column:34},end:{line:5,column:47}},{start:{line:5,column:50},end:{line:5,column:84}}],line:5},"6":{loc:{start:{line:5,column:50},end:{line:5,column:84}},type:"binary-expr",locations:[{start:{line:5,column:50},end:{line:5,column:63}},{start:{line:5,column:67},end:{line:5,column:84}}],line:5},"7":{loc:{start:{line:10,column:4},end:{line:10,column:33}},type:"if",locations:[{start:{line:10,column:4},end:{line:10,column:33}},{start:{line:10,column:4},end:{line:10,column:33}}],line:10},"8":{loc:{start:{line:13,column:25},end:{line:17,column:2}},type:"binary-expr",locations:[{start:{line:13,column:26},end:{line:13,column:30}},{start:{line:13,column:34},end:{line:13,column:57}},{start:{line:13,column:63},end:{line:17,column:1}}],line:13},"9":{loc:{start:{line:13,column:63},end:{line:17,column:1}},type:"cond-expr",locations:[{start:{line:13,column:80},end:{line:15,column:1}},{start:{line:15,column:5},end:{line:17,column:1}}],line:13},"10":{loc:{start:{line:18,column:19},end:{line:24,column:1}},type:"binary-expr",locations:[{start:{line:18,column:20},end:{line:18,column:24}},{start:{line:18,column:28},end:{line:18,column:45}},{start:{line:18,column:50},end:{line:24,column:1}}],line:18},"11":{loc:{start:{line:19,column:4},end:{line:19,column:42}},type:"if",locations:[{start:{line:19,column:4},end:{line:19,column:42}},{start:{line:19,column:4},end:{line:19,column:42}}],line:19},"12":{loc:{start:{line:19,column:8},end:{line:19,column:29}},type:"binary-expr",locations:[{start:{line:19,column:8},end:{line:19,column:11}},{start:{line:19,column:15},end:{line:19,column:29}}],line:19},"13":{loc:{start:{line:21,column:4},end:{line:21,column:141}},type:"if",locations:[{start:{line:21,column:4},end:{line:21,column:141}},{start:{line:21,column:4},end:{line:21,column:141}}],line:21},"14":{loc:{start:{line:21,column:40},end:{line:21,column:141}},type:"if",locations:[{start:{line:21,column:40},end:{line:21,column:141}},{start:{line:21,column:40},end:{line:21,column:141}}],line:21},"15":{loc:{start:{line:21,column:44},end:{line:21,column:107}},type:"binary-expr",locations:[{start:{line:21,column:44},end:{line:21,column:59}},{start:{line:21,column:63},end:{line:21,column:107}}],line:21},"16":{loc:{start:{line:37,column:4},end:{line:41,column:5}},type:"if",locations:[{start:{line:37,column:4},end:{line:41,column:5}},{start:{line:37,column:4},end:{line:41,column:5}}],line:37},"17":{loc:{start:{line:45,column:4},end:{line:49,column:5}},type:"if",locations:[{start:{line:45,column:4},end:{line:49,column:5}},{start:{line:45,column:4},end:{line:49,column:5}}],line:45},"18":{loc:{start:{line:55,column:8},end:{line:58,column:9}},type:"if",locations:[{start:{line:55,column:8},end:{line:58,column:9}},{start:{line:55,column:8},end:{line:58,column:9}}],line:55}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0],"7":[0,0],"8":[0,0,0],"9":[0,0],"10":[0,0,0],"11":[0,0],"12":[0,0],"13":[0,0],"14":[0,0],"15":[0,0],"16":[0,0],"17":[0,0],"18":[0,0]},inputSourceMap:{version:3,file:"/home/daniel/sytw/backend/sytw_backend/src/routers/usuarioRouters/patchUsuario.ts",sources:["/home/daniel/sytw/backend/sytw_backend/src/routers/usuarioRouters/patchUsuario.ts"],names:[],mappings:";;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iDAAmC;AACnC,kDAA+C;AAGlC,QAAA,kBAAkB,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC;AAEnD;;;;;GAKG;AACH,0BAAkB,CAAC,KAAK,CAAC,UAAU,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,EAAE,EAAE;IACtD,IAAI,CAAC,GAAG,CAAC,KAAK,CAAC,EAAE,EAAE;QACjB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,KAAK,EAAE,uBAAuB;SAC/B,CAAC,CAAC;KACJ;IAED,MAAM,cAAc,GAAG,CAAC,QAAQ,CAAC,CAAC;IAClC,MAAM,aAAa,GAAG,MAAM,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;IAC5C,MAAM,aAAa,GACjB,aAAa,CAAC,KAAK,CAAC,CAAC,MAAM,EAAE,EAAE,CAAC,cAAc,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC;IAEnE,IAAI,CAAC,aAAa,EAAE;QAClB,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC;YAC1B,KAAK,EAAE,yBAAyB;SACjC,CAAC,CAAC;KACJ;IAED,IAAI;QACF,MAAM,OAAO,GACX,MAAM,iBAAO,CAAC,gBAAgB,CAAC,EAAE,GAAG,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC,QAAQ,EAAE,EAAE,EAAE,GAAG,CAAC,IAAI,EAAE;YACzE,GAAG,EAAE,IAAI;YACT,aAAa,EAAE,IAAI;SACpB,CAAC,CAAC;QAEL,IAAI,CAAC,OAAO,EAAE;YACZ,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,EAAC,KAAK,EAAE,YAAY;aAC/C,CAAC,CAAC;SACJ;QAED,OAAO,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;KAC1B;IAAC,OAAO,KAAK,EAAE;QACd,OAAO,GAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACpC;AACH,CAAC,CAAC,CAAC",sourcesContent:["import * as express from 'express';\nimport { Usuario } from '../../models/usuario';\nimport { verifyToken } from './postUsuario';\n\nexport const patchUsuarioRouter = express.Router();\n\n/**\n * Funcion que actualiza los datos de un usuario por id.\n * Comprueba que los atributos que se van a editar estan permitidos.\n * Crea el objeto para modificar y lo actualiza.\n * Devolviendo estados en consecuencia a los errores.\n */\npatchUsuarioRouter.patch('/usuario', async (req, res) => {\n  if (!req.query.id) {\n    return res.status(400).send({\n      error: 'Se debe proveer un id',\n    });\n  }\n\n  const allowedUpdates = ['equipo'];\n  const actualUpdates = Object.keys(req.body);\n  const isValidUpdate =\n    actualUpdates.every((update) => allowedUpdates.includes(update));\n\n  if (!isValidUpdate) {\n    return res.status(400).send({\n      error: 'Update is not permitted',\n    });\n  }\n\n  try {\n    const usuario =\n      await Usuario.findOneAndUpdate({ _id: req.query.id.toString() }, req.body, {\n        new: true,\n        runValidators: true,\n      });\n\n    if (!usuario) {\n      return res.status(404).send({error: 'Wrong user',\n      });\n    }\n\n    return res.send(usuario);\n  } catch (error) {\n    return res.status(400).send(error);\n  }\n});\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"e277bb97e9e68b79ea3644b7edb2ae8b43033361"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1d1n6oqfp9=function(){return actualCoverage;};}return actualCoverage;}cov_1d1n6oqfp9();var __createBinding=(cov_1d1n6oqfp9().s[0]++,(cov_1d1n6oqfp9().b[0][0]++,this)&&(cov_1d1n6oqfp9().b[0][1]++,this.__createBinding)||(cov_1d1n6oqfp9().b[0][2]++,Object.create?(cov_1d1n6oqfp9().b[1][0]++,function(o,m,k,k2){cov_1d1n6oqfp9().f[0]++;cov_1d1n6oqfp9().s[1]++;if(k2===undefined){cov_1d1n6oqfp9().b[2][0]++;cov_1d1n6oqfp9().s[2]++;k2=k;}else{cov_1d1n6oqfp9().b[2][1]++;}var desc=(cov_1d1n6oqfp9().s[3]++,Object.getOwnPropertyDescriptor(m,k));cov_1d1n6oqfp9().s[4]++;if((cov_1d1n6oqfp9().b[4][0]++,!desc)||(cov_1d1n6oqfp9().b[4][1]++,"get"in desc?(cov_1d1n6oqfp9().b[5][0]++,!m.__esModule):(cov_1d1n6oqfp9().b[5][1]++,(cov_1d1n6oqfp9().b[6][0]++,desc.writable)||(cov_1d1n6oqfp9().b[6][1]++,desc.configurable)))){cov_1d1n6oqfp9().b[3][0]++;cov_1d1n6oqfp9().s[5]++;desc={enumerable:true,get:function(){cov_1d1n6oqfp9().f[1]++;cov_1d1n6oqfp9().s[6]++;return m[k];}};}else{cov_1d1n6oqfp9().b[3][1]++;}cov_1d1n6oqfp9().s[7]++;Object.defineProperty(o,k2,desc);}):(cov_1d1n6oqfp9().b[1][1]++,function(o,m,k,k2){cov_1d1n6oqfp9().f[2]++;cov_1d1n6oqfp9().s[8]++;if(k2===undefined){cov_1d1n6oqfp9().b[7][0]++;cov_1d1n6oqfp9().s[9]++;k2=k;}else{cov_1d1n6oqfp9().b[7][1]++;}cov_1d1n6oqfp9().s[10]++;o[k2]=m[k];})));var __setModuleDefault=(cov_1d1n6oqfp9().s[11]++,(cov_1d1n6oqfp9().b[8][0]++,this)&&(cov_1d1n6oqfp9().b[8][1]++,this.__setModuleDefault)||(cov_1d1n6oqfp9().b[8][2]++,Object.create?(cov_1d1n6oqfp9().b[9][0]++,function(o,v){cov_1d1n6oqfp9().f[3]++;cov_1d1n6oqfp9().s[12]++;Object.defineProperty(o,"default",{enumerable:true,value:v});}):(cov_1d1n6oqfp9().b[9][1]++,function(o,v){cov_1d1n6oqfp9().f[4]++;cov_1d1n6oqfp9().s[13]++;o["default"]=v;})));var __importStar=(cov_1d1n6oqfp9().s[14]++,(cov_1d1n6oqfp9().b[10][0]++,this)&&(cov_1d1n6oqfp9().b[10][1]++,this.__importStar)||(cov_1d1n6oqfp9().b[10][2]++,function(mod){cov_1d1n6oqfp9().f[5]++;cov_1d1n6oqfp9().s[15]++;if((cov_1d1n6oqfp9().b[12][0]++,mod)&&(cov_1d1n6oqfp9().b[12][1]++,mod.__esModule)){cov_1d1n6oqfp9().b[11][0]++;cov_1d1n6oqfp9().s[16]++;return mod;}else{cov_1d1n6oqfp9().b[11][1]++;}var result=(cov_1d1n6oqfp9().s[17]++,{});cov_1d1n6oqfp9().s[18]++;if(mod!=null){cov_1d1n6oqfp9().b[13][0]++;cov_1d1n6oqfp9().s[19]++;for(var k in mod){cov_1d1n6oqfp9().s[20]++;if((cov_1d1n6oqfp9().b[15][0]++,k!=="default")&&(cov_1d1n6oqfp9().b[15][1]++,Object.prototype.hasOwnProperty.call(mod,k))){cov_1d1n6oqfp9().b[14][0]++;cov_1d1n6oqfp9().s[21]++;__createBinding(result,mod,k);}else{cov_1d1n6oqfp9().b[14][1]++;}}}else{cov_1d1n6oqfp9().b[13][1]++;}cov_1d1n6oqfp9().s[22]++;__setModuleDefault(result,mod);cov_1d1n6oqfp9().s[23]++;return result;}));cov_1d1n6oqfp9().s[24]++;Object.defineProperty(exports,"__esModule",{value:true});cov_1d1n6oqfp9().s[25]++;exports.patchUsuarioRouter=void 0;const express=(cov_1d1n6oqfp9().s[26]++,__importStar(require("express")));const usuario_1=(cov_1d1n6oqfp9().s[27]++,require("../../models/usuario"));cov_1d1n6oqfp9().s[28]++;exports.patchUsuarioRouter=express.Router();/**
 * Funcion que actualiza los datos de un usuario por id.
 * Comprueba que los atributos que se van a editar estan permitidos.
 * Crea el objeto para modificar y lo actualiza.
 * Devolviendo estados en consecuencia a los errores.
 */cov_1d1n6oqfp9().s[29]++;exports.patchUsuarioRouter.patch('/usuario',async(req,res)=>{cov_1d1n6oqfp9().f[6]++;cov_1d1n6oqfp9().s[30]++;if(!req.query.id){cov_1d1n6oqfp9().b[16][0]++;cov_1d1n6oqfp9().s[31]++;return res.status(400).send({error:'Se debe proveer un id'});}else{cov_1d1n6oqfp9().b[16][1]++;}const allowedUpdates=(cov_1d1n6oqfp9().s[32]++,['equipo']);const actualUpdates=(cov_1d1n6oqfp9().s[33]++,Object.keys(req.body));const isValidUpdate=(cov_1d1n6oqfp9().s[34]++,actualUpdates.every(update=>{cov_1d1n6oqfp9().f[7]++;cov_1d1n6oqfp9().s[35]++;return allowedUpdates.includes(update);}));cov_1d1n6oqfp9().s[36]++;if(!isValidUpdate){cov_1d1n6oqfp9().b[17][0]++;cov_1d1n6oqfp9().s[37]++;return res.status(400).send({error:'Update is not permitted'});}else{cov_1d1n6oqfp9().b[17][1]++;}cov_1d1n6oqfp9().s[38]++;try{const usuario=(cov_1d1n6oqfp9().s[39]++,await usuario_1.Usuario.findOneAndUpdate({_id:req.query.id.toString()},req.body,{new:true,runValidators:true}));cov_1d1n6oqfp9().s[40]++;if(!usuario){cov_1d1n6oqfp9().b[18][0]++;cov_1d1n6oqfp9().s[41]++;return res.status(404).send({error:'Wrong user'});}else{cov_1d1n6oqfp9().b[18][1]++;}cov_1d1n6oqfp9().s[42]++;return res.send(usuario);}catch(error){cov_1d1n6oqfp9().s[43]++;return res.status(400).send(error);}});//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL2hvbWUvZGFuaWVsL3N5dHcvYmFja2VuZC9zeXR3X2JhY2tlbmQvc3JjL3JvdXRlcnMvdXN1YXJpb1JvdXRlcnMvcGF0Y2hVc3VhcmlvLnRzIiwic291cmNlcyI6WyIvaG9tZS9kYW5pZWwvc3l0dy9iYWNrZW5kL3N5dHdfYmFja2VuZC9zcmMvcm91dGVycy91c3VhcmlvUm91dGVycy9wYXRjaFVzdWFyaW8udHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFBQSxpREFBbUM7QUFDbkMsa0RBQStDO0FBR2xDLFFBQUEsa0JBQWtCLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBRW5EOzs7OztHQUtHO0FBQ0gsMEJBQWtCLENBQUMsS0FBSyxDQUFDLFVBQVUsRUFBRSxLQUFLLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxFQUFFO0lBQ3RELElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLEVBQUUsRUFBRTtRQUNqQixPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQzFCLEtBQUssRUFBRSx1QkFBdUI7U0FDL0IsQ0FBQyxDQUFDO0tBQ0o7SUFFRCxNQUFNLGNBQWMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0lBQ2xDLE1BQU0sYUFBYSxHQUFHLE1BQU0sQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksQ0FBQyxDQUFDO0lBQzVDLE1BQU0sYUFBYSxHQUNqQixhQUFhLENBQUMsS0FBSyxDQUFDLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxjQUFjLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7SUFFbkUsSUFBSSxDQUFDLGFBQWEsRUFBRTtRQUNsQixPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDO1lBQzFCLEtBQUssRUFBRSx5QkFBeUI7U0FDakMsQ0FBQyxDQUFDO0tBQ0o7SUFFRCxJQUFJO1FBQ0YsTUFBTSxPQUFPLEdBQ1gsTUFBTSxpQkFBTyxDQUFDLGdCQUFnQixDQUFDLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLFFBQVEsRUFBRSxFQUFFLEVBQUUsR0FBRyxDQUFDLElBQUksRUFBRTtZQUN6RSxHQUFHLEVBQUUsSUFBSTtZQUNULGFBQWEsRUFBRSxJQUFJO1NBQ3BCLENBQUMsQ0FBQztRQUVMLElBQUksQ0FBQyxPQUFPLEVBQUU7WUFDWixPQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLEVBQUMsS0FBSyxFQUFFLFlBQVk7YUFDL0MsQ0FBQyxDQUFDO1NBQ0o7UUFFRCxPQUFPLEdBQUcsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDMUI7SUFBQyxPQUFPLEtBQUssRUFBRTtRQUNkLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDcEM7QUFDSCxDQUFDLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGV4cHJlc3MgZnJvbSAnZXhwcmVzcyc7XG5pbXBvcnQgeyBVc3VhcmlvIH0gZnJvbSAnLi4vLi4vbW9kZWxzL3VzdWFyaW8nO1xuaW1wb3J0IHsgdmVyaWZ5VG9rZW4gfSBmcm9tICcuL3Bvc3RVc3VhcmlvJztcblxuZXhwb3J0IGNvbnN0IHBhdGNoVXN1YXJpb1JvdXRlciA9IGV4cHJlc3MuUm91dGVyKCk7XG5cbi8qKlxuICogRnVuY2lvbiBxdWUgYWN0dWFsaXphIGxvcyBkYXRvcyBkZSB1biB1c3VhcmlvIHBvciBpZC5cbiAqIENvbXBydWViYSBxdWUgbG9zIGF0cmlidXRvcyBxdWUgc2UgdmFuIGEgZWRpdGFyIGVzdGFuIHBlcm1pdGlkb3MuXG4gKiBDcmVhIGVsIG9iamV0byBwYXJhIG1vZGlmaWNhciB5IGxvIGFjdHVhbGl6YS5cbiAqIERldm9sdmllbmRvIGVzdGFkb3MgZW4gY29uc2VjdWVuY2lhIGEgbG9zIGVycm9yZXMuXG4gKi9cbnBhdGNoVXN1YXJpb1JvdXRlci5wYXRjaCgnL3VzdWFyaW8nLCBhc3luYyAocmVxLCByZXMpID0+IHtcbiAgaWYgKCFyZXEucXVlcnkuaWQpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgZXJyb3I6ICdTZSBkZWJlIHByb3ZlZXIgdW4gaWQnLFxuICAgIH0pO1xuICB9XG5cbiAgY29uc3QgYWxsb3dlZFVwZGF0ZXMgPSBbJ2VxdWlwbyddO1xuICBjb25zdCBhY3R1YWxVcGRhdGVzID0gT2JqZWN0LmtleXMocmVxLmJvZHkpO1xuICBjb25zdCBpc1ZhbGlkVXBkYXRlID1cbiAgICBhY3R1YWxVcGRhdGVzLmV2ZXJ5KCh1cGRhdGUpID0+IGFsbG93ZWRVcGRhdGVzLmluY2x1ZGVzKHVwZGF0ZSkpO1xuXG4gIGlmICghaXNWYWxpZFVwZGF0ZSkge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZCh7XG4gICAgICBlcnJvcjogJ1VwZGF0ZSBpcyBub3QgcGVybWl0dGVkJyxcbiAgICB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgY29uc3QgdXN1YXJpbyA9XG4gICAgICBhd2FpdCBVc3VhcmlvLmZpbmRPbmVBbmRVcGRhdGUoeyBfaWQ6IHJlcS5xdWVyeS5pZC50b1N0cmluZygpIH0sIHJlcS5ib2R5LCB7XG4gICAgICAgIG5ldzogdHJ1ZSxcbiAgICAgICAgcnVuVmFsaWRhdG9yczogdHJ1ZSxcbiAgICAgIH0pO1xuXG4gICAgaWYgKCF1c3VhcmlvKSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDQpLnNlbmQoe2Vycm9yOiAnV3JvbmcgdXNlcicsXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gcmVzLnNlbmQodXN1YXJpbyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKGVycm9yKTtcbiAgfVxufSk7XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJtYXBwaW5ncyI6Ijt5eEZBQUEsMEVBQ0EsMkVBQStDLHlCQUdsQ0EsMEJBQWtCLENBQUdDLE9BQU8sQ0FBQ0MsTUFBTSxFQUFFLENBRWxEOzs7OztHQUFBLHlCQU1BRiwwQkFBa0IsQ0FBQ0csS0FBSyxDQUFDLFVBQVUsQ0FBRSxNQUFPQyxHQUFHLENBQUVDLEdBQUcsR0FBSSxrREFDdEQsR0FBSSxDQUFDRCxHQUFHLENBQUNFLEtBQUssQ0FBQ0MsRUFBRSxDQUFFLHNEQUNqQixNQUFPRixJQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQzFCQyxLQUFLLENBQUUsd0JBQ1IsQ0FBQyxFQUNILGtDQUVELEtBQU1DLGVBQWMsMkJBQUcsQ0FBQyxRQUFRLENBQUMsRUFDakMsS0FBTUMsY0FBYSwyQkFBR0MsTUFBTSxDQUFDQyxJQUFJLENBQUNWLEdBQUcsQ0FBQ1csSUFBSSxDQUFDLEVBQzNDLEtBQU1DLGNBQWEsMkJBQ2pCSixhQUFhLENBQUNLLEtBQUssQ0FBRUMsTUFBTSxFQUFLLHVFQUFjLENBQUNDLFFBQVEsQ0FBQ0QsTUFBTSxDQUFDLENBQUQsQ0FBQyxDQUFDLEVBQUMseUJBRW5FLEdBQUksQ0FBQ0YsYUFBYSxDQUFFLHNEQUNsQixNQUFPWCxJQUFHLENBQUNHLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQ0MsSUFBSSxDQUFDLENBQzFCQyxLQUFLLENBQUUsMEJBQ1IsQ0FBQyxFQUNILDJEQUVELEdBQUksQ0FDRixLQUFNVSxRQUFPLDJCQUNYLEtBQU1DLGtCQUFPLENBQUNDLGdCQUFnQixDQUFDLENBQUVDLEdBQUcsQ0FBRW5CLEdBQUcsQ0FBQ0UsS0FBSyxDQUFDQyxFQUFFLENBQUNpQixRQUFRLEVBQUUsQ0FBRSxDQUFFcEIsR0FBRyxDQUFDVyxJQUFJLENBQUUsQ0FDekVVLEdBQUcsQ0FBRSxJQUFJLENBQ1RDLGFBQWEsQ0FBRSxLQUNoQixDQUFDLEVBQUMseUJBRUwsR0FBSSxDQUFDTixPQUFPLENBQUUsc0RBQ1osTUFBT2YsSUFBRyxDQUFDRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUNDLElBQUksQ0FBQyxDQUFDQyxLQUFLLENBQUUsYUFDbkMsQ0FBQyxFQUNILDJEQUVELE1BQU9MLElBQUcsQ0FBQ0ksSUFBSSxDQUFDVyxPQUFPLENBQUMsRUFDeEIsTUFBT1YsS0FBSyxDQUFFLDBCQUNkLE1BQU9MLElBQUcsQ0FBQ0csTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNDLEtBQUssQ0FBQyxFQUV0QyxDQUFDLENBQUMiLCJuYW1lcyI6WyJleHBvcnRzIiwiZXhwcmVzcyIsIlJvdXRlciIsInBhdGNoIiwicmVxIiwicmVzIiwicXVlcnkiLCJpZCIsInN0YXR1cyIsInNlbmQiLCJlcnJvciIsImFsbG93ZWRVcGRhdGVzIiwiYWN0dWFsVXBkYXRlcyIsIk9iamVjdCIsImtleXMiLCJib2R5IiwiaXNWYWxpZFVwZGF0ZSIsImV2ZXJ5IiwidXBkYXRlIiwiaW5jbHVkZXMiLCJ1c3VhcmlvIiwidXN1YXJpb18xIiwiZmluZE9uZUFuZFVwZGF0ZSIsIl9pZCIsInRvU3RyaW5nIiwibmV3IiwicnVuVmFsaWRhdG9ycyJdLCJzb3VyY2VzIjpbIi9ob21lL2RhbmllbC9zeXR3L2JhY2tlbmQvc3l0d19iYWNrZW5kL3NyYy9yb3V0ZXJzL3VzdWFyaW9Sb3V0ZXJzL3BhdGNoVXN1YXJpby50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgKiBhcyBleHByZXNzIGZyb20gJ2V4cHJlc3MnO1xuaW1wb3J0IHsgVXN1YXJpbyB9IGZyb20gJy4uLy4uL21vZGVscy91c3VhcmlvJztcbmltcG9ydCB7IHZlcmlmeVRva2VuIH0gZnJvbSAnLi9wb3N0VXN1YXJpbyc7XG5cbmV4cG9ydCBjb25zdCBwYXRjaFVzdWFyaW9Sb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xuXG4vKipcbiAqIEZ1bmNpb24gcXVlIGFjdHVhbGl6YSBsb3MgZGF0b3MgZGUgdW4gdXN1YXJpbyBwb3IgaWQuXG4gKiBDb21wcnVlYmEgcXVlIGxvcyBhdHJpYnV0b3MgcXVlIHNlIHZhbiBhIGVkaXRhciBlc3RhbiBwZXJtaXRpZG9zLlxuICogQ3JlYSBlbCBvYmpldG8gcGFyYSBtb2RpZmljYXIgeSBsbyBhY3R1YWxpemEuXG4gKiBEZXZvbHZpZW5kbyBlc3RhZG9zIGVuIGNvbnNlY3VlbmNpYSBhIGxvcyBlcnJvcmVzLlxuICovXG5wYXRjaFVzdWFyaW9Sb3V0ZXIucGF0Y2goJy91c3VhcmlvJywgYXN5bmMgKHJlcSwgcmVzKSA9PiB7XG4gIGlmICghcmVxLnF1ZXJ5LmlkKSB7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5zZW5kKHtcbiAgICAgIGVycm9yOiAnU2UgZGViZSBwcm92ZWVyIHVuIGlkJyxcbiAgICB9KTtcbiAgfVxuXG4gIGNvbnN0IGFsbG93ZWRVcGRhdGVzID0gWydlcXVpcG8nXTtcbiAgY29uc3QgYWN0dWFsVXBkYXRlcyA9IE9iamVjdC5rZXlzKHJlcS5ib2R5KTtcbiAgY29uc3QgaXNWYWxpZFVwZGF0ZSA9XG4gICAgYWN0dWFsVXBkYXRlcy5ldmVyeSgodXBkYXRlKSA9PiBhbGxvd2VkVXBkYXRlcy5pbmNsdWRlcyh1cGRhdGUpKTtcblxuICBpZiAoIWlzVmFsaWRVcGRhdGUpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDApLnNlbmQoe1xuICAgICAgZXJyb3I6ICdVcGRhdGUgaXMgbm90IHBlcm1pdHRlZCcsXG4gICAgfSk7XG4gIH1cblxuICB0cnkge1xuICAgIGNvbnN0IHVzdWFyaW8gPVxuICAgICAgYXdhaXQgVXN1YXJpby5maW5kT25lQW5kVXBkYXRlKHsgX2lkOiByZXEucXVlcnkuaWQudG9TdHJpbmcoKSB9LCByZXEuYm9keSwge1xuICAgICAgICBuZXc6IHRydWUsXG4gICAgICAgIHJ1blZhbGlkYXRvcnM6IHRydWUsXG4gICAgICB9KTtcblxuICAgIGlmICghdXN1YXJpbykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5zZW5kKHtlcnJvcjogJ1dyb25nIHVzZXInLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zZW5kKHVzdWFyaW8pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwMCkuc2VuZChlcnJvcik7XG4gIH1cbn0pO1xuIl19